/* style.css */
:root{
  --bg1:#0b0f2a;
  --bg2:#0b3c6a;
  --bg3:#1be6d6;
  --pink:#ff4fa3;
  --mint:#3dffb3;
  --sky:#53c7ff;
  --softred:#ff6a8f;
  --text:#eef3ff;
  --muted:rgba(238,243,255,.72);
  --glass:rgba(255,255,255,.10);
  --stroke:rgba(0,0,0,.35);
  --shadow: 0 16px 50px rgba(0,0,0,.35);
  --radius: 22px;
  --safeTop: env(safe-area-inset-top);
  --safeBottom: env(safe-area-inset-bottom);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "SF Pro Display", "Inter", system-ui, Arial;
  color:var(--text);
  overflow:hidden; /* important for iOS */
  background:
    radial-gradient(1200px 900px at 50% 0%, rgba(27,230,214,.65), transparent 55%),
    radial-gradient(900px 700px at 80% 40%, rgba(255,79,163,.25), transparent 60%),
    radial-gradient(900px 700px at 15% 65%, rgba(83,199,255,.25), transparent 60%),
    linear-gradient(180deg, var(--bg2), var(--bg1));
}

#fx{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  z-index:0;
}

/* screens */
.screen{
  position:fixed;
  inset:0;
  z-index:1;
  display:flex;
  padding: calc(16px + var(--safeTop)) 16px calc(16px + var(--safeBottom));
}
.screen[aria-hidden="true"]{ display:none; }
.screen--center{
  align-items:center;
  justify-content:center;
}

.glass{
  background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.08));
  border: 1px solid rgba(255,255,255,.16);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
}

/* splash */
.splash-card{
  width:min(520px, 92vw);
  padding:28px 22px;
  text-align:center;
  position:relative;
  overflow:hidden;
}
.splash-title{
  font-weight:800;
  letter-spacing:.02em;
  font-size: clamp(26px, 5.5vw, 36px);
  background: linear-gradient(90deg, var(--sky), var(--mint));
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
}
.splash-sub{
  margin-top:10px;
  font-size: 14px;
  letter-spacing:.35em;
  color: rgba(255,255,255,.7);
}
.splash-spark{
  position:absolute;
  inset:-40%;
  background:
    radial-gradient(circle at 30% 40%, rgba(255,255,255,.16), transparent 55%),
    radial-gradient(circle at 70% 60%, rgba(255,79,163,.12), transparent 55%),
    radial-gradient(circle at 50% 20%, rgba(61,255,179,.12), transparent 55%);
  animation: floatGlow 4.2s ease-in-out infinite;
  pointer-events:none;
}
@keyframes floatGlow{
  0%,100%{ transform: translate3d(0,0,0) rotate(0deg); opacity:.9; }
  50%{ transform: translate3d(2%, -2%, 0) rotate(6deg); opacity:1; }
}

/* menu */
.menu-wrap{
  width:min(560px, 92vw);
  display:flex;
  flex-direction:column;
  gap:18px;
  align-items:center;
  text-align:center;
}
.logo__word{
  font-size: clamp(44px, 10vw, 72px);
  font-weight:900;
  letter-spacing:-0.02em;
  text-shadow:
    0 2px 0 rgba(0,0,0,.15),
    0 18px 60px rgba(0,0,0,.35);
}
.logo__tag{
  margin-top:6px;
  color:var(--muted);
  font-weight:600;
  letter-spacing:.02em;
}
.menu-buttons{
  width:min(440px, 92vw);
  display:flex;
  flex-direction:column;
  gap:12px;
}
.tiny-note{
  margin-top:6px;
  font-size: 12px;
  color: rgba(255,255,255,.75);
}

/* buttons */
.btn{
  appearance:none;
  border:0;
  padding: 16px 18px;
  border-radius: 999px;
  font-weight:900;
  letter-spacing:.08em;
  text-transform: uppercase;
  font-size: 16px;
  color: rgba(255,255,255,.92);
  background: rgba(255,255,255,.10);
  box-shadow: 0 10px 24px rgba(0,0,0,.22);
  border:1px solid rgba(255,255,255,.15);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  cursor:pointer;
  transform: translateZ(0);
}
.btn:active{ transform: scale(.98); }
.btn--primary{
  background: linear-gradient(90deg, var(--mint), var(--softred));
  color: #081022;
  border: 1px solid rgba(255,255,255,.22);
}
.btn--ghost{
  background: rgba(255,255,255,.09);
}
.btn--wide{ width:100%; }

/* GAME layout */
#screen-game{
  display:flex;
  flex-direction:column;
  gap: 10px;
}

.hud-top{
  display:flex;
  gap:10px;
  align-items:flex-start;
  flex-wrap:nowrap;
  z-index:3;
  padding-top: var(--safeTop);
}
.hud-pill{
  width: 88px;
  padding:10px 10px;
  border-radius: 16px;
  background: rgba(255,255,255,.10);
  border: 1px solid rgba(255,255,255,.14);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}
.hud-label{
  font-size: 11px;
  letter-spacing:.18em;
  opacity:.7;
}
.hud-value{
  font-weight:900;
  font-size: 20px;
  margin-top:2px;
}
.hud-right{
  margin-left:auto;
  display:flex;
  align-items:center;
  gap:10px;
}
.gear{
  width:44px;height:44px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.18);
  background: rgba(0,0,0,.18);
  color: rgba(255,255,255,.92);
  box-shadow: 0 12px 26px rgba(0,0,0,.25);
  cursor:pointer;
}
.gear:active{ transform: scale(.96); }
.gear__icon{ font-size: 20px; display:block; line-height:44px; text-align:center; }

.lives{
  display:flex;
  gap:8px;
  align-items:center;
}
.heart{
  width:26px;height:22px;
  position:relative;
  filter: drop-shadow(0 6px 14px rgba(0,0,0,.25));
}
.heart::before,
.heart::after{
  content:"";
  position:absolute;
  width:14px;height:22px;
  background: linear-gradient(180deg, #ff77b6, #ff2f85);
  border-radius: 14px 14px 0 0;
  top:0;
}
.heart::before{ left:7px; transform: rotate(-45deg); transform-origin: 0 100%; }
.heart::after{ left:0; transform: rotate(45deg); transform-origin: 100% 100%; }
.heart--off{
  opacity:.25;
  filter:none;
}

/* Playfield fills the screen between HUDs */
.playfield{
  position:relative;
  flex: 1;
  min-height: 0;
  border-radius: 28px;
  background:
    radial-gradient(900px 700px at 30% 20%, rgba(61,255,179,.18), transparent 55%),
    radial-gradient(900px 700px at 80% 70%, rgba(255,79,163,.14), transparent 55%),
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.16));
  border: 1px solid rgba(255,255,255,.12);
  box-shadow: 0 20px 70px rgba(0,0,0,.25);
  overflow:hidden;
  touch-action: none; /* IMPORTANT: no scroll/zoom while playing */
}

.distractors{
  position:absolute;
  inset:0;
  pointer-events:none;
  opacity:.92;
}

.distractor{
  position:absolute;
  width: 56px;
  height: 56px;
  border-radius: 16px;
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.35), transparent 50%),
    linear-gradient(135deg, rgba(83,199,255,.55), rgba(255,79,163,.25));
  border: 1px solid rgba(255,255,255,.18);
  box-shadow: 0 18px 40px rgba(0,0,0,.18);
  filter: saturate(1.2);
  transform: rotate(12deg);
}
.distractor::after{
  content:"";
  position:absolute;
  inset:-14px;
  background: radial-gradient(circle, rgba(255,255,255,.18), transparent 62%);
  filter: blur(2px);
}

/* Target */
.target{
  position:absolute;
  width: 170px;
  height: 170px;
  left:50%;
  top:58%;
  transform: translate(-50%,-50%);
  border-radius: 999px;
  pointer-events: auto;
}
.target *{ pointer-events:none; } /* tap should count on whole target */
.target__halo{
  position:absolute; inset:-26px;
  border-radius:999px;
  background:
    radial-gradient(circle, rgba(61,255,179,.25), transparent 55%),
    radial-gradient(circle, rgba(255,79,163,.16), transparent 60%);
  filter: blur(2px);
  animation: haloPulse 1.4s ease-in-out infinite;
}
@keyframes haloPulse{
  0%,100%{ transform: scale(1); opacity:.85; }
  50%{ transform: scale(1.06); opacity:1; }
}
.target__ring{
  position:absolute; inset:0;
  border-radius:999px;
  background: radial-gradient(circle at 30% 25%, rgba(255,255,255,.35), transparent 60%);
  border: 3px solid rgba(255,255,255,.35);
  box-shadow: inset 0 0 0 3px rgba(0,0,0,.08);
}
.target__core{
  position:absolute; inset: 36px;
  border-radius:999px;
  background:
    radial-gradient(circle at 35% 35%, rgba(255,255,255,.65), rgba(255,255,255,.08) 55%, rgba(0,0,0,.18) 100%),
    linear-gradient(135deg, rgba(61,255,179,.55), rgba(255,79,163,.22));
  border: 2px solid rgba(255,255,255,.25);
  box-shadow: 0 20px 40px rgba(0,0,0,.15);
}
.target__shine{
  position:absolute;
  left: 26px; top: 20px;
  width: 54px; height: 54px;
  border-radius:999px;
  background: radial-gradient(circle, rgba(255,255,255,.55), transparent 65%);
  filter: blur(1px);
  opacity:.8;
}

/* judgement - anime style */
.judgement{
  position:absolute;
  left:16px;
  top: 16px;
  z-index:5;
  pointer-events:none;
  min-width: 180px;
}
.pop{
  display:inline-block;
  font-weight: 1000;
  font-size: 34px;
  letter-spacing:.04em;
  text-transform: uppercase;
  margin: 0;
  padding: 6px 10px;
  border-radius: 16px;
  background: rgba(0,0,0,.12);
  border: 1px solid rgba(255,255,255,.16);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);

  /* anime outline */
  -webkit-text-stroke: 4px rgba(0,0,0,.35);
  text-shadow:
    0 2px 0 rgba(0,0,0,.25),
    0 10px 20px rgba(0,0,0,.25),
    2px 2px 0 rgba(0,0,0,.25),
    -2px 2px 0 rgba(0,0,0,.25),
    2px -2px 0 rgba(0,0,0,.25),
    -2px -2px 0 rgba(0,0,0,.25);
  position:relative;
  animation: popIn .33s cubic-bezier(.2,1.2,.2,1) both;
}
@keyframes popIn{
  from{ transform: translateY(-8px) scale(.92); opacity:0; filter: blur(1px); }
  to{ transform: translateY(0) scale(1); opacity:1; filter: blur(0); }
}
.pop::before{
  content:"";
  position:absolute;
  inset:-16px -18px;
  background:
    radial-gradient(circle at 20% 35%, rgba(255,255,255,.28), transparent 42%),
    radial-gradient(circle at 80% 55%, rgba(61,255,179,.20), transparent 48%),
    radial-gradient(circle at 50% 80%, rgba(255,79,163,.20), transparent 48%);
  filter: blur(2px);
  opacity:.9;
  z-index:-1;
}
.pop::after{
  content:"";
  position:absolute;
  right:-14px;
  top:-10px;
  width: 46px;
  height: 46px;
  opacity:.95;
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.85), transparent 45%),
    conic-gradient(from 120deg, rgba(255,79,163,.0), rgba(255,79,163,.65), rgba(83,199,255,.55), rgba(61,255,179,.55), rgba(255,79,163,.0));
  border-radius: 12px;
  filter: drop-shadow(0 10px 16px rgba(0,0,0,.22));
  transform: rotate(22deg);
  animation: sparkSpin .7s ease-out both;
}
@keyframes sparkSpin{
  from{ transform: rotate(-10deg) scale(.7); opacity:0; }
  to{ transform: rotate(22deg) scale(1); opacity:1; }
}
.pop--perfect{ color: #ffe45b; }
.pop--great{ color: #53c7ff; }
.pop--miss{ color: #ff4fa3; }
.pop--good{ color: #3dffb3; }

.tutorial{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 18px;
  z-index:10;
}
.hidden{ display:none !important; }
.tutorial-card{
  width:min(520px, 92vw);
  padding: 18px;
}
.tut-title{
  margin:0 0 10px;
  font-size: 22px;
  letter-spacing:-.01em;
}
.tut-list{
  margin:0 0 14px;
  padding-left: 18px;
  color: rgba(255,255,255,.85);
  line-height: 1.5;
}

/* bottom HUD */
.hud-bottom{
  display:flex;
  gap:10px;
  align-items:stretch;
  padding-bottom: var(--safeBottom);
  z-index:3;
}
.hud-mini, .hud-energy{
  background: rgba(0,0,0,.16);
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 18px;
  padding: 10px 12px;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  min-width: 88px;
}
.hud-mini__label{
  font-size: 11px;
  letter-spacing:.18em;
  text-transform: uppercase;
  opacity:.75;
}
.hud-mini__value{
  font-size: 16px;
  font-weight:900;
  margin-top:4px;
}
.hud-energy{
  flex:1;
  display:flex;
  flex-direction:column;
  justify-content:center;
  gap:6px;
}
.bar{
  height: 10px;
  border-radius: 999px;
  background: rgba(255,255,255,.12);
  border: 1px solid rgba(255,255,255,.14);
  overflow:hidden;
}
.bar__fill{
  height:100%;
  width:0%;
  background: linear-gradient(90deg, var(--mint), var(--softred));
  border-radius:999px;
}

/* modals */
.modal{
  position:fixed;
  inset:0;
  z-index:20;
  display:flex;
  align-items:flex-end;
  justify-content:center;
  padding: 18px 14px calc(18px + var(--safeBottom));
}
.modal.hidden{ display:none; }
.modal__backdrop{
  position:absolute;
  inset:0;
  background: rgba(0,0,0,.35);
  backdrop-filter: blur(4px);
}
.modal__panel{
  width:min(560px, 94vw);
  max-height: 80vh;
  overflow:auto;
  position:relative;
  padding: 16px;
}
.modal__title{
  font-weight:1000;
  letter-spacing:-.01em;
  font-size: 22px;
  margin-bottom: 10px;
}
.modal__subtitle{
  font-weight:900;
  margin: 10px 0 10px;
  color: rgba(255,255,255,.9);
}
.divider{
  height:1px;
  background: rgba(255,255,255,.16);
  margin: 12px 0;
}
.row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding: 10px 0;
}
.row__label{ font-weight:900; }
.row__sub{ font-size: 12px; color: rgba(255,255,255,.72); margin-top:2px; }
.row__left{ display:flex; flex-direction:column; }

/* switch */
.switch{ position:relative; width:56px; height:32px; }
.switch input{ display:none; }
.switch__ui{
  position:absolute; inset:0;
  border-radius:999px;
  background: rgba(255,255,255,.16);
  border: 1px solid rgba(255,255,255,.16);
}
.switch__ui::after{
  content:"";
  position:absolute;
  width: 26px; height: 26px;
  left: 3px; top: 2px;
  border-radius:999px;
  background: rgba(255,255,255,.85);
  box-shadow: 0 10px 18px rgba(0,0,0,.25);
  transition: transform .18s ease;
}
.switch input:checked + .switch__ui{
  background: linear-gradient(90deg, rgba(61,255,179,.6), rgba(255,79,163,.45));
}
.switch input:checked + .switch__ui::after{
  transform: translateX(24px);
}

/* skins */
.skin-grid{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:10px;
}
.skin{
  padding: 10px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(0,0,0,.12);
  cursor:pointer;
  text-align:center;
}
.skin__dot{
  width: 56px; height: 56px;
  border-radius: 999px;
  margin: 0 auto 8px;
  border: 2px solid rgba(255,255,255,.28);
  box-shadow: 0 18px 30px rgba(0,0,0,.18);
}
.skin__name{
  font-size: 12px;
  font-weight:900;
  letter-spacing:.06em;
  opacity:.9;
}
.skin--active{
  outline: 2px solid rgba(61,255,179,.7);
}

/* achievements */
.ach-list{
  display:flex;
  flex-direction:column;
  gap:10px;
}
.ach{
  padding: 12px;
  border-radius: 16px;
  background: rgba(0,0,0,.12);
  border: 1px solid rgba(255,255,255,.14);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}
.ach__name{ font-weight:1000; }
.ach__desc{ font-size: 12px; color: rgba(255,255,255,.72); margin-top:3px; }
.ach__badge{
  font-weight:1000;
  font-size: 12px;
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.10);
}
.ach--done .ach__badge{
  background: linear-gradient(90deg, rgba(61,255,179,.6), rgba(255,79,163,.4));
  color:#081022;
}

/* shop */
.shop-stub{
  padding: 14px 0 8px;
  text-align:center;
}
.shop-big{
  font-size: 22px;
  font-weight:1000;
}
.shop-sub{
  margin-top:6px;
  color: rgba(255,255,255,.75);
  font-size: 13px;
}

/* small screens fit */
@media (max-width: 420px){
  .hud-pill{ width: 76px; }
  .target{ width: 150px; height:150px; }
  .target__core{ inset: 32px; }
  .pop{ font-size: 30px; }
}